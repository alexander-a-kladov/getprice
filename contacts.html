<p><a href=https://topdeck.ru/forums/topic/169221-%D0%BF%D1%80%D0%BE%D0%B4%D0%B0%D0%BC-%D0%BA%D0%B0%D1%80%D1%82%D1%8B-%D0%B2-%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82-%D0%B8-%D0%B2%D0%B5%D1%87%D0%BD%D1%8B%D0%B5-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D1%8B target="_blank">Торговая Тема</a>
<a style="margin-left: 20px" href=https://topdeck.ru/messenger/compose/?to=10345 target="_blank">Сообщение</a>
<a style="margin-left: 40px" href=https://vk.com/ak8ak8 target="_blank">Вконтакте</a></p>
<p><details>
<summary><b>Инструкция</b></summary>
<p><b>"Торговая тема"</b> - переход в торговую тему topdeck.ru </p>
<p><b>"Сообщение"</b> - переход на форму сообщения для покупки topdeck.ru </p>
<p><b>"Вконтакте"</b> - переход на страницу Вконтакте </p>
<p><b>Клик на изображение карты</b> - переход на поиск карт с названием карты topdeck.ru </p>
<p><b>Ctrl (удерживание после клика) + Клик на изображение карты</b> - переход на поиск карты c названием карты mtggoldfish.com </p>
</details></p>
<script type="text/javascript">
var lastResFind=""; // последний удачный результат
var copy_page=""; // копия страницы в исходном виде
var input;

function TrimStr(s) {
     s = s.replace( /^\s+/g, '');
  return s.replace( /\s+$/g, '');
}

function toggleSpoilers() {
  var spoilers = [].slice.call(document.querySelectorAll('summary'));
  delete spoilers[0];
  spoilers.forEach(function(node) {
  node.click();
  });
}

function registerEnterHandler() {
input = document.getElementById("text-to-find");
input.addEventListener("keyup", function(event) {
  // Число 13 в "Enter" и клавиши на клавиатуре
  if (event.keyCode === 13) {
    // При необходимости отмените действие по умолчанию
    event.preventDefault();
    // Вызов элемента button одним щелчком мыши
    document.getElementById("find-button").click();
  }
});
}

function FindOnPage(inputId) {//ищет текст на странице, в параметр передается ID поля для ввода
  var obj = window.document.getElementById(inputId);
  var textToFind;
 
  if (obj) {
    textToFind = TrimStr(obj.value);//обрезаем пробелы
  } else {
    alert("Введенная фраза не найдена");
    return;
  }
  if (textToFind == "") {
    alert("Вы ничего не ввели");
    return;
  }
 
  if(document.body.innerHTML.indexOf(textToFind)=="-1")
  alert("Ничего не найдено, проверьте правильность ввода!");
 
  toggleSpoilers();

  if(copy_page.length>0)
        document.body.innerHTML=copy_page;
  else copy_page=document.body.innerHTML;

 
  document.body.innerHTML = document.body.innerHTML.replace(eval("/name="+lastResFind+"/gi")," ");//стираем предыдущие якори для скрола
  document.body.innerHTML = document.body.innerHTML.replace(eval("/"+textToFind+"/gi"),"<a name="+textToFind+" style='background:red'>"+textToFind+"</a>"); //Заменяем найденный текст ссылками с якорем;
  lastResFind=textToFind; // сохраняем фразу для поиска, чтобы в дальнейшем по ней стереть все ссылки
  window.location = '#'+textToFind;//перемещаем скрол к последнему найденному совпадению
  window.scrollBy(0,-350);
  registerEnterHandler()
 }

 // Выполнение функции, когда пользователь отпускает клавишу на клавиатуре
window.onload = registerEnterHandler
</script>

<p>Поиск по странице</p>
<input type="text" id="text-to-find" value="">
<input type="button" id="find-button" onclick="javascript: FindOnPage('text-to-find'); return false;" value="Искать"/>
<br/><i>Введите слово или фразу для поиска.</i>
<hr/>


